# Soybean Admin NestJS

åŸºäº **NestJS + TypeORM + MySQL + JWT** æ„å»ºçš„å…¨æ ˆåå°ç®¡ç†ç³»ç»Ÿåç«¯ï¼Œå®Œç¾é€‚é… [SoybeanAdmin](https://github.com/soybeanjs/soybean-admin) å‰ç«¯æ¨¡ç‰ˆã€‚

## ğŸŒŸ é¡¹ç›®ä»‹ç»

æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªåŠŸèƒ½å®Œå¤‡çš„åå°ç®¡ç†ç³»ç»Ÿåç«¯ï¼Œå®ç°äº†å®Œå–„çš„ RBACï¼ˆåŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼‰æƒé™ä½“ç³»ã€åŠ¨æ€è·¯ç”±åˆ†å‘ã€JWT è®¤è¯ä»¥åŠè‡ªåŠ¨åŒ–çš„æ•°æ®åº“åˆå§‹åŒ–åŠŸèƒ½ã€‚å®ƒæ—¨åœ¨ä¸ºä¸­å¤§å‹åå°åº”ç”¨æä¾›ä¸€ä¸ªç¨³å®šã€å®‰å…¨ä¸”æ˜“äºæ‰©å±•çš„åŸºç¡€æ¶æ„ã€‚

## ğŸ›  æŠ€æœ¯æ ˆ

- **æ¡†æ¶**: [NestJS](https://nestjs.com/) (v11)
- **æ•°æ®åº“**: [MySQL](https://www.mysql.com/) (v8.0+)
- **ORM**: [TypeORM](https://typeorm.io/)
- **è®¤è¯**: [Passport](http://www.passportjs.org/) + [JWT](https://jwt.io/)
- **éªŒè¯**: [class-validator](https://github.com/typestack/class-validator) + [class-transformer](https://github.com/typestack/class-transformer)
- **æ–‡æ¡£**: [Swagger](https://swagger.io/)
- **åŠ å¯†**: [Bcrypt.js](https://github.com/dcodeIO/bcrypt.js)
- **è¯­è¨€**: TypeScript

## âœ¨ åŠŸèƒ½ç‰¹æ€§

- **ç”¨æˆ·ç®¡ç†**: ç”¨æˆ·çš„å¢åˆ æ”¹æŸ¥ã€åˆ†é¡µã€æœç´¢ã€çŠ¶æ€å¯ç”¨/ç¦ç”¨ã€é‡ç½®å¯†ç ã€‚
- **è§’è‰²ç®¡ç†**: è§’è‰²å®šä¹‰ã€ç¼–ç å”¯ä¸€æ€§éªŒè¯ã€è§’è‰²å…³è”èœå•æƒé™åˆ†é…ã€‚
- **èœå•ç®¡ç†**: æ ‘å½¢ç»“æ„ç®¡ç†ã€èœå•ç±»å‹ï¼ˆç›®å½•/èœå•/æŒ‰é’®ï¼‰ã€å›¾æ ‡é…ç½®ã€æƒé™æ ‡è¯†è®¾å®šã€‚
- **RBAC æƒé™**: åŸºäºç”¨æˆ·-è§’è‰²-èœå•çš„å¤šå¯¹å¤šå…³è”ï¼Œå®ç°ç²¾ç»†åŒ–æƒé™æ§åˆ¶ã€‚
- **åŠ¨æ€è·¯ç”±**: æ ¹æ®ç”¨æˆ·è§’è‰²è‡ªåŠ¨ç”Ÿæˆå‰ç«¯è·¯ç”±è¡¨ï¼Œæ”¯æŒåŠ¨æ€èœå•æ¸²æŸ“ã€‚
- **è‡ªåŠ¨åˆå§‹åŒ–**: æä¾›ç§å­æ•°æ®ï¼ˆSeedï¼‰è„šæœ¬ï¼Œä¸€é”®åˆå§‹åŒ–ç³»ç»ŸåŸºç¡€æ•°æ®ã€‚
- **å®‰å…¨åŠ å›º**: å¯†ç  Bcrypt åŠ å¯†ã€JWT çŠ¶æ€æ— æ„ŸçŸ¥åˆ·æ–°ã€å…¨å±€å¼‚å¸¸è¿‡æ»¤ã€ç»Ÿä¸€å“åº”æ ¼å¼ã€‚

## ğŸ“‚ é¡¹ç›®ç»“æ„

```text
soybean-admin-backend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ common/              # å…¬å…±æ¨¡å— (è£…é¥°å™¨ã€è¿‡æ»¤å™¨ã€æ‹¦æˆªå™¨ã€å®ˆå«)
â”‚   â”œâ”€â”€ config/              # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ database/            # æ•°æ®åº“ç›¸å…³ (ç§å­æ•°æ®ã€è¿ç§»)
â”‚   â”œâ”€â”€ entities/            # TypeORM å®ä½“ç±» (æ•°æ®åº“è¡¨å®šä¹‰)
â”‚   â”œâ”€â”€ modules/             # ä¸šåŠ¡åŠŸèƒ½æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ auth/            # è®¤è¯æ¨¡å— (ç™»å½•ã€æ³¨å†Œã€ç”¨æˆ·ä¿¡æ¯)
â”‚   â”‚   â”œâ”€â”€ user/            # ç”¨æˆ·ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ role/            # è§’è‰²ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ menu/            # èœå•ç®¡ç†
â”‚   â”‚   â””â”€â”€ route/           # åŠ¨æ€è·¯ç”±æ¨¡å—
â”‚   â”œâ”€â”€ app.module.ts        # å…¨å±€æ¨¡å—é…ç½®
â”‚   â””â”€â”€ main.ts              # å…¥å£æ–‡ä»¶ (Swaggerã€CORSã€å…¨å±€ç®¡é“é…ç½®)
â”œâ”€â”€ .env                     # ç¯å¢ƒå˜é‡ (æ•°æ®åº“è¿æ¥ã€JWT å¯†é’¥)
â”œâ”€â”€ package.json             # ä¾èµ–ç®¡ç†
â””â”€â”€ tsconfig.json            # TypeScript é…ç½®
```

## ğŸ’» ç¯å¢ƒè¦æ±‚

- **Node.js**: >= 20.x
- **pnpm**: >= 9.x
- **MySQL**: >= 8.0

## ğŸš€ å®‰è£…æ­¥éª¤

1. **å…‹éš†é¡¹ç›®**
   ```bash
   git clone <repository-url>
   cd soybean-admin-nestjs/soybean-admin-backend
   ```

2. **å®‰è£…ä¾èµ–**
   ```bash
   pnpm install
   ```

3. **ç¯å¢ƒå˜é‡é…ç½®**
   å¤åˆ¶ `.env.example` (å¦‚æœæœ‰) æˆ–ç›´æ¥ä¿®æ”¹ `.env` æ–‡ä»¶ï¼š
   ```env
   NODE_ENV=development
   PORT=3000

   # æ•°æ®åº“é…ç½®
   DB_HOST=localhost
   DB_PORT=3306
   DB_USER=root
   DB_PASSWORD=your_password
   DB_NAME=soybean_admin

   # JWT é…ç½®
   JWT_SECRET=soybean_admin_secret_key
   JWT_EXPIRES_IN=24h
   ```

4. **æ•°æ®åº“åˆå§‹åŒ–**
   ç¡®ä¿ MySQL æœåŠ¡å·²å¯åŠ¨å¹¶åˆ›å»ºäº†å¯¹åº”çš„æ•°æ®åº“ï¼Œç„¶åè¿è¡Œç§å­è„šæœ¬ï¼š
   ```bash
   pnpm run seed
   ```

## ğŸ›  å¯åŠ¨å‘½ä»¤

- **å¼€å‘æ¨¡å¼** (çƒ­æ›´æ–°):
  ```bash
  pnpm run start:dev
  ```
- **ç¼–è¯‘ç”Ÿäº§ç¯å¢ƒ**:
  ```bash
  pnpm run build
  ```
- **ç”Ÿäº§æ¨¡å¼è¿è¡Œ**:
  ```bash
  pnpm run start:prod
  ```

## ğŸ”— è®¿é—®åœ°å€

- **åç«¯æœåŠ¡**: `http://localhost:3000/api`
- **API æ–‡æ¡£ (Swagger)**: `http://localhost:3000/api-docs`

## ğŸ”‘ é»˜è®¤è´¦å·å¯†ç 

åˆå§‹åŒ–æ•°æ®åï¼Œå¯ä½¿ç”¨ä»¥ä¸‹è´¦å·ç™»å½•ï¼š

| è´¦å· | å¯†ç  | è§’è‰² |
| :--- | :--- | :--- |
| **admin** | **123456** | è¶…çº§ç®¡ç†å‘˜ |

## â“ å¸¸è§é—®é¢˜

**Q: ä¸ºä»€ä¹ˆç™»å½•åçœ‹ä¸åˆ°èœå•ï¼Ÿ**
A: è¯·ç¡®ä¿æ‰§è¡Œäº† `pnpm run seed` è„šæœ¬ã€‚è¯¥è„šæœ¬ä¼šåˆå§‹åŒ–ç³»ç»Ÿç®¡ç†èœå•å¹¶å…³è”ç»™ `admin` è§’è‰²ã€‚

**Q: å¦‚ä½•ä¿®æ”¹ API å‰ç¼€ï¼Ÿ**
A: åœ¨ `src/main.ts` ä¸­é€šè¿‡ `app.setGlobalPrefix('api')` è¿›è¡Œä¿®æ”¹ã€‚

**Q: æ•°æ®åº“è¡¨æ²¡æœ‰è‡ªåŠ¨åˆ›å»ºï¼Ÿ**
A: åœ¨å¼€å‘ç¯å¢ƒä¸‹ï¼Œ`.env` ä¸­çš„ `NODE_ENV` åº”è®¾ç½®ä¸º `development`ï¼Œæ­¤æ—¶ `synchronize: true` ä¼šç”Ÿæ•ˆå¹¶è‡ªåŠ¨åŒæ­¥è¡¨ç»“æ„ã€‚
